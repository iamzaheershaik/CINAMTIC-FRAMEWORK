<main class="h-full overflow-y-auto text-slate-200 flex flex-col p-4 sm:p-6 md:p-8 font-sans">
  <div class="w-full max-w-7xl mx-auto flex flex-col md:flex-row gap-x-8 lg:gap-x-12">
    
    <!-- Vertical Framework Navigation -->
    <nav class="flex flex-row md:flex-col md:w-56 flex-shrink-0 md:sticky md:top-6 md:self-start space-y-0 md:space-y-1 space-x-1 md:space-x-0 overflow-x-auto pb-4 md:pb-0 -mx-4 px-4 md:mx-0 md:px-0">
      <button 
        (click)="selectFramework('cinematic')"
        class="flex-shrink-0 md:w-full text-center md:text-left py-2.5 px-4 rounded-xl focus:outline-none font-medium transition-all duration-200 text-sm sm:text-base whitespace-nowrap"
        [class.bg-gradient-to-r]="activeFramework() === 'cinematic'"
        [class.from-purple-600]="activeFramework() === 'cinematic'"
        [class.to-indigo-600]="activeFramework() === 'cinematic'"
        [class.text-white]="activeFramework() === 'cinematic'"
        [class.shadow-lg]="activeFramework() === 'cinematic'"
        [class.shadow-purple-500/20]="activeFramework() === 'cinematic'"
        [class.text-slate-400]="activeFramework() !== 'cinematic'"
        [class.hover:bg-slate-800]="activeFramework() !== 'cinematic'"
        [class.hover:text-slate-100]="activeFramework() !== 'cinematic'">
        CINEMATIC
      </button>
      <button 
        (click)="selectFramework('articulated')"
        class="flex-shrink-0 md:w-full text-center md:text-left py-2.5 px-4 rounded-xl focus:outline-none font-medium transition-all duration-200 text-sm sm:text-base whitespace-nowrap"
        [class.bg-gradient-to-r]="activeFramework() === 'articulated'"
        [class.from-purple-600]="activeFramework() === 'articulated'"
        [class.to-indigo-600]="activeFramework() === 'articulated'"
        [class.text-white]="activeFramework() === 'articulated'"
        [class.shadow-lg]="activeFramework() === 'articulated'"
        [class.shadow-purple-500/20]="activeFramework() === 'articulated'"
        [class.text-slate-400]="activeFramework() !== 'articulated'"
        [class.hover:bg-slate-800]="activeFramework() !== 'articulated'"
        [class.hover:text-slate-100]="activeFramework() !== 'articulated'">
        ARTICULATED
      </button>
      <button 
        (click)="selectFramework('photoreal')"
        class="flex-shrink-0 md:w-full text-center md:text-left py-2.5 px-4 rounded-xl focus:outline-none font-medium transition-all duration-200 text-sm sm:text-base whitespace-nowrap"
        [class.bg-gradient-to-r]="activeFramework() === 'photoreal'"
        [class.from-purple-600]="activeFramework() === 'photoreal'"
        [class.to-indigo-600]="activeFramework() === 'photoreal'"
        [class.text-white]="activeFramework() === 'photoreal'"
        [class.shadow-lg]="activeFramework() === 'photoreal'"
        [class.shadow-purple-500/20]="activeFramework() === 'photoreal'"
        [class.text-slate-400]="activeFramework() !== 'photoreal'"
        [class.hover:bg-slate-800]="activeFramework() !== 'photoreal'"
        [class.hover:text-slate-100]="activeFramework() !== 'photoreal'">
        PHOTOREAL
      </button>
      <button 
        (click)="selectFramework('action')"
        class="flex-shrink-0 md:w-full text-center md:text-left py-2.5 px-4 rounded-xl focus:outline-none font-medium transition-all duration-200 text-sm sm:text-base whitespace-nowrap"
        [class.bg-gradient-to-r]="activeFramework() === 'action'"
        [class.from-purple-600]="activeFramework() === 'action'"
        [class.to-indigo-600]="activeFramework() === 'action'"
        [class.text-white]="activeFramework() === 'action'"
        [class.shadow-lg]="activeFramework() === 'action'"
        [class.shadow-purple-500/20]="activeFramework() === 'action'"
        [class.text-slate-400]="activeFramework() !== 'action'"
        [class.hover:bg-slate-800]="activeFramework() !== 'action'"
        [class.hover:text-slate-100]="activeFramework() !== 'action'">
        ACTION
      </button>
      <button 
        (click)="selectFramework('motion')"
        class="flex-shrink-0 md:w-full text-center md:text-left py-2.5 px-4 rounded-xl focus:outline-none font-medium transition-all duration-200 text-sm sm:text-base whitespace-nowrap"
        [class.bg-gradient-to-r]="activeFramework() === 'motion'"
        [class.from-purple-600]="activeFramework() === 'motion'"
        [class.to-indigo-600]="activeFramework() === 'motion'"
        [class.text-white]="activeFramework() === 'motion'"
        [class.shadow-lg]="activeFramework() === 'motion'"
        [class.shadow-purple-500/20]="activeFramework() === 'motion'"
        [class.text-slate-400]="activeFramework() !== 'motion'"
        [class.hover:bg-slate-800]="activeFramework() !== 'motion'"
        [class.hover:text-slate-100]="activeFramework() !== 'motion'">
        MOTION
      </button>
      <button 
        (click)="selectFramework('transformation')"
        class="flex-shrink-0 md:w-full text-center md:text-left py-2.5 px-4 rounded-xl focus:outline-none font-medium transition-all duration-200 text-sm sm:text-base whitespace-nowrap"
        [class.bg-gradient-to-r]="activeFramework() === 'transformation'"
        [class.from-purple-600]="activeFramework() === 'transformation'"
        [class.to-indigo-600]="activeFramework() === 'transformation'"
        [class.text-white]="activeFramework() === 'transformation'"
        [class.shadow-lg]="activeFramework() === 'transformation'"
        [class.shadow-purple-500/20]="activeFramework() === 'transformation'"
        [class.text-slate-400]="activeFramework() !== 'transformation'"
        [class.hover:bg-slate-800]="activeFramework() !== 'transformation'"
        [class.hover:text-slate-100]="activeFramework() !== 'transformation'">
        TRANSFORMATION
      </button>
      <button 
        (click)="selectFramework('logo-reveal')"
        class="flex-shrink-0 md:w-full text-center md:text-left py-2.5 px-4 rounded-xl focus:outline-none font-medium transition-all duration-200 text-sm sm:text-base whitespace-nowrap"
        [class.bg-gradient-to-r]="activeFramework() === 'logo-reveal'"
        [class.from-purple-600]="activeFramework() === 'logo-reveal'"
        [class.to-indigo-600]="activeFramework() === 'logo-reveal'"
        [class.text-white]="activeFramework() === 'logo-reveal'"
        [class.shadow-lg]="activeFramework() === 'logo-reveal'"
        [class.shadow-purple-500/20]="activeFramework() === 'logo-reveal'"
        [class.text-slate-400]="activeFramework() !== 'logo-reveal'"
        [class.hover:bg-slate-800]="activeFramework() !== 'logo-reveal'"
        [class.hover:text-slate-100]="activeFramework() !== 'logo-reveal'">
        LOGO REVEAL
      </button>
      <button 
        (click)="selectFramework('storyboard')"
        class="flex-shrink-0 md:w-full text-center md:text-left py-2.5 px-4 rounded-xl focus:outline-none font-medium transition-all duration-200 text-sm sm:text-base whitespace-nowrap"
        [class.bg-gradient-to-r]="activeFramework() === 'storyboard'"
        [class.from-purple-600]="activeFramework() === 'storyboard'"
        [class.to-indigo-600]="activeFramework() === 'storyboard'"
        [class.text-white]="activeFramework() === 'storyboard'"
        [class.shadow-lg]="activeFramework() === 'storyboard'"
        [class.shadow-purple-500/20]="activeFramework() === 'storyboard'"
        [class.text-slate-400]="activeFramework() !== 'storyboard'"
        [class.hover:bg-slate-800]="activeFramework() !== 'storyboard'"
        [class.hover:text-slate-100]="activeFramework() !== 'storyboard'">
        STORYBOARD
      </button>
      <button 
        (click)="selectFramework('character')"
        class="flex-shrink-0 md:w-full text-center md:text-left py-2.5 px-4 rounded-xl focus:outline-none font-medium transition-all duration-200 text-sm sm:text-base whitespace-nowrap"
        [class.bg-gradient-to-r]="activeFramework() === 'character'"
        [class.from-purple-600]="activeFramework() === 'character'"
        [class.to-indigo-600]="activeFramework() === 'character'"
        [class.text-white]="activeFramework() === 'character'"
        [class.shadow-lg]="activeFramework() === 'character'"
        [class.shadow-purple-500/20]="activeFramework() === 'character'"
        [class.text-slate-400]="activeFramework() !== 'character'"
        [class.hover:bg-slate-800]="activeFramework() !== 'character'"
        [class.hover:text-slate-100]="activeFramework() !== 'character'">
        CHARACTER
      </button>
      <button 
        (click)="selectFramework('pro-guide')"
        class="flex-shrink-0 md:w-full text-center md:text-left py-2.5 px-4 rounded-xl focus:outline-none font-medium transition-all duration-200 text-sm sm:text-base whitespace-nowrap"
        [class.bg-gradient-to-r]="activeFramework() === 'pro-guide'"
        [class.from-purple-600]="activeFramework() === 'pro-guide'"
        [class.to-indigo-600]="activeFramework() === 'pro-guide'"
        [class.text-white]="activeFramework() === 'pro-guide'"
        [class.shadow-lg]="activeFramework() === 'pro-guide'"
        [class.shadow-purple-500/20]="activeFramework() === 'pro-guide'"
        [class.text-slate-400]="activeFramework() !== 'pro-guide'"
        [class.hover:bg-slate-800]="activeFramework() !== 'pro-guide'"
        [class.hover:text-slate-100]="activeFramework() !== 'pro-guide'">
        PRO GUIDE
      </button>
      <button 
        (click)="selectFramework('myth-prompt')"
        class="flex-shrink-0 md:w-full text-center md:text-left py-2.5 px-4 rounded-xl focus:outline-none font-medium transition-all duration-200 text-sm sm:text-base whitespace-nowrap"
        [class.bg-gradient-to-r]="activeFramework() === 'myth-prompt'"
        [class.from-amber-500]="activeFramework() === 'myth-prompt'"
        [class.to-yellow-500]="activeFramework() === 'myth-prompt'"
        [class.text-slate-900]="activeFramework() === 'myth-prompt'"
        [class.shadow-lg]="activeFramework() === 'myth-prompt'"
        [class.shadow-yellow-500/20]="activeFramework() === 'myth-prompt'"
        [class.text-slate-400]="activeFramework() !== 'myth-prompt'"
        [class.hover:bg-slate-800]="activeFramework() !== 'myth-prompt'"
        [class.hover:text-slate-100]="activeFramework() !== 'myth-prompt'">
        MYTHPROMPT STUDIO
      </button>
    </nav>

    <!-- Main Content Area -->
    <div class="flex-1 min-w-0">
      @if (activeFramework() !== 'pro-guide' && activeFramework() !== 'myth-prompt' && activeFramework() !== 'transformation' && activeFramework() !== 'storyboard' && activeFramework() !== 'character' && activeFramework() !== 'motion' && activeFramework() !== 'action' && activeFramework() !== 'logo-reveal') {
        <!-- Header for Cinematic, Articulated, Photoreal -->
        <header class="text-center mb-8">
          <h1 class="text-4xl sm:text-5xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-indigo-400 mb-2">
            AI Prompt Generator
          </h1>
          @if (activeFramework() === 'cinematic') {
            <p class="text-lg text-slate-400 max-w-2xl mx-auto">
              Transform simple ideas into detailed video prompts with the CINEMATIC framework.
            </p>
          } @else if (activeFramework() === 'articulated') {
            <p class="text-lg text-slate-400 max-w-2xl mx-auto">
              Craft revolutionary AI animation prompts with the ARTICULATED framework.
            </p>
          } @else {
            <p class="text-lg text-slate-400 max-w-2xl mx-auto">
              Produce stunning CGI product commercials with the PHOTOREAL framework.
            </p>
          }
        </header>
      }

      @if(activeFramework() === 'pro-guide') {
        <app-pro-guide></app-pro-guide>
      } @else if (activeFramework() === 'myth-prompt') {
        <app-myth-prompt></app-myth-prompt>
      } @else if (activeFramework() === 'logo-reveal') {
        <!-- Logo Reveal UI -->
        <header class="text-center mb-8">
          <h1 class="text-4xl sm:text-5xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-indigo-400 mb-2">
            Cinematic Logo Reveal Generator
          </h1>
          <p class="text-lg text-slate-400 max-w-2xl mx-auto">
            Upload your logo to generate a professional, After Effects-style animation prompt.
          </p>
        </header>
        <div class="w-full space-y-8">
          <div class="p-6 bg-slate-800/60 rounded-2xl border border-slate-700/80 shadow-2xl shadow-black/20">
            <div class="flex flex-col md:flex-row gap-6 items-center">
              <!-- Uploader -->
              <div class="flex-1 w-full">
                <label for="logo-upload" class="flex flex-col items-center justify-center w-full h-48 border-2 border-slate-600 border-dashed rounded-xl cursor-pointer bg-slate-800 hover:bg-slate-700/50 transition-colors">
                  @if (uploadedLogoPreview()) {
                    <img [src]="uploadedLogoPreview()" alt="Logo Preview" class="max-h-44 object-contain p-2">
                  } @else {
                    <div class="flex flex-col items-center justify-center pt-5 pb-6">
                      <svg class="w-8 h-8 mb-4 text-slate-500" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 16">
                        <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 13h3a3 3 0 0 0 0-6h-.025A5.56 5.56 0 0 0 16 6.5 5.5 5.5 0 0 0 5.207 5.021C5.137 5.017 5.071 5 5 5a4 4 0 0 0 0 8h2.167M10 15V6m0 0L8 8m2-2 2 2"/>
                      </svg>
                      <p class="mb-2 text-sm text-slate-400"><span class="font-semibold">Click to upload</span> or drag and drop</p>
                      <p class="text-xs text-slate-500">PNG, JPG, WEBP (MAX. 5MB)</p>
                    </div>
                  }
                  <input id="logo-upload" type="file" class="hidden" (change)="onLogoFileSelected($event)" accept="image/png, image/jpeg, image/webp">
                </label>
              </div>
              <!-- Generate Button -->
              <div class="flex-shrink-0">
                <button 
                  (click)="onGenerateLogoReveal()"
                  [disabled]="isLoading() || !uploadedLogo()"
                  class="flex items-center justify-center w-full md:w-auto px-8 py-4 bg-gradient-to-r from-purple-600 to-indigo-600 text-white font-semibold rounded-xl hover:from-purple-500 hover:to-indigo-500 disabled:from-slate-700 disabled:to-slate-700 disabled:cursor-not-allowed disabled:text-slate-400 transition-all duration-300 shadow-lg shadow-purple-500/20 transform hover:-translate-y-1 active:translate-y-0 focus:outline-none focus:ring-4 focus:ring-purple-500/50 focus:ring-offset-2 focus:ring-offset-slate-900 h-48">
                  @if (isLoading()) {
                    <div class="text-center">
                      <svg class="animate-spin mx-auto h-8 w-8 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                        <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                        <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                      </svg>
                      <span class="mt-2 block">Generating...</span>
                    </div>
                  } @else {
                    <span class="text-lg">Generate Reveal</span>
                  }
                </button>
              </div>
            </div>
          </div>
          
          <!-- Output Section -->
          @if (isLoading()) {
            <div class="text-center p-8">
              <div class="flex justify-center items-center space-x-2">
                <div class="w-4 h-4 rounded-full bg-purple-400 animate-pulse [animation-delay:-0.3s]"></div>
                <div class="w-4 h-4 rounded-full bg-purple-400 animate-pulse [animation-delay:-0.15s]"></div>
                <div class="w-4 h-4 rounded-full bg-purple-400 animate-pulse"></div>
              </div>
              <p class="mt-4 text-slate-400">The AI is analyzing your logo and crafting a prompt...</p>
            </div>
          }

          @if (error()) {
            <div class="bg-red-900/50 border border-red-700 text-red-300 px-4 py-3 rounded-xl" role="alert">
              <strong class="font-bold">Error: </strong>
              <span class="block sm:inline">{{ error() }}</span>
            </div>
          }

          @if (logoRevealJson()) {
            <div class="bg-slate-800/60 rounded-2xl border border-slate-700/80 shadow-2xl shadow-black/20 relative animate-[fadeIn_0.5s_ease-in-out]">
              <div class="p-6 sm:p-8">
                <div class="flex justify-between items-center mb-6">
                  <h2 class="text-2xl font-bold text-white">Your Logo Reveal Prompt</h2>
                  <button (click)="copyToClipboard()" 
                    class="px-4 py-2 bg-slate-700 text-slate-300 font-semibold rounded-xl hover:bg-slate-600 transition duration-200 text-sm focus:outline-none focus:ring-2 focus:ring-purple-500">
                      {{ copyButtonText() }}
                  </button>
                </div>
                <pre class="bg-black/40 p-4 rounded-xl overflow-x-auto border border-slate-700"><code class="text-sm text-slate-300 whitespace-pre-wrap">{{ logoRevealJson() }}</code></pre>
              </div>
            </div>
          }
        </div>
      } @else if (activeFramework() === 'transformation') {
          <!-- Header -->
          <header class="text-center mb-8">
            <h1 class="text-4xl sm:text-5xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-indigo-400 mb-2">
              AI Transformation Prompt Generator
            </h1>
            <p class="text-lg text-slate-400 max-w-2xl mx-auto">
              Craft detailed video prompts for source-to-target transformations.
            </p>
          </header>

          <!-- Input Section -->
          <div class="mb-8 p-6 bg-slate-800/60 rounded-2xl border border-slate-700/80 shadow-2xl shadow-black/20 space-y-6">
            <div class="flex flex-col md:flex-row gap-6">
              <!-- Source Subject -->
              <div class="flex-1">
                <label for="source-subject" class="block text-lg font-medium text-purple-300 mb-3">Source Subject</label>
                <textarea 
                  id="source-subject"
                  [value]="sourceSubject()"
                  (input)="updateSourceSubject($event)"
                  placeholder="e.g., A man in a business suit..."
                  class="w-full p-4 bg-slate-900/70 border border-slate-700 rounded-xl text-slate-200 placeholder-slate-500 focus:ring-2 focus:ring-offset-2 focus:ring-offset-slate-900 focus:ring-purple-500 focus:border-purple-500 transition duration-200 overflow-hidden"
                  rows="2"
                ></textarea>
              </div>
              <!-- Target Subject -->
              <div class="flex-1">
                <label for="target-subject" class="block text-lg font-medium text-purple-300 mb-3">Target Subject</label>
                <textarea 
                  id="target-subject"
                  [value]="targetSubject()"
                  (input)="updateTargetSubject($event)"
                  placeholder="e.g., ...transforms into a powerful cyborg warrior."
                  class="w-full p-4 bg-slate-900/70 border border-slate-700 rounded-xl text-slate-200 placeholder-slate-500 focus:ring-2 focus:ring-offset-2 focus:ring-offset-slate-900 focus:ring-purple-500 focus:border-purple-500 transition duration-200 overflow-hidden"
                  rows="2"
                ></textarea>
              </div>
            </div>
            <div class="text-center">
              <button 
                (click)="onGenerate()"
                [disabled]="isLoading() || !sourceSubject().trim() || !targetSubject().trim()"
                class="flex items-center mx-auto justify-center px-8 py-4 bg-gradient-to-r from-purple-600 to-indigo-600 text-white font-semibold rounded-xl hover:from-purple-500 hover:to-indigo-500 disabled:from-slate-700 disabled:to-slate-700 disabled:cursor-not-allowed disabled:text-slate-400 transition-all duration-300 shadow-lg shadow-purple-500/20 transform hover:-translate-y-1 active:translate-y-0 focus:outline-none focus:ring-4 focus:ring-purple-500/50 focus:ring-offset-2 focus:ring-offset-slate-900">
                @if (isLoading()) {
                  <svg class="animate-spin -ml-1 mr-3 h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                    <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                  </svg>
                  <span>Generating...</span>
                } @else {
                  <span>Generate Transformation</span>
                }
              </button>
            </div>
          </div>

          <!-- Output Section -->
          <div class="w-full space-y-8">
            @if (isLoading()) {
              <div class="text-center p-8">
                <div class="flex justify-center items-center space-x-2">
                  <div class="w-4 h-4 rounded-full bg-purple-400 animate-pulse [animation-delay:-0.3s]"></div>
                  <div class="w-4 h-4 rounded-full bg-purple-400 animate-pulse [animation-delay:-0.15s]"></div>
                  <div class="w-4 h-4 rounded-full bg-purple-400 animate-pulse"></div>
                </div>
                <p class="mt-4 text-slate-400">The AI is crafting your transformation prompt...</p>
              </div>
            }

            @if (error()) {
              <div class="bg-red-900/50 border border-red-700 text-red-300 px-4 py-3 rounded-xl" role="alert">
                <strong class="font-bold">Error: </strong>
                <span class="block sm:inline">{{ error() }}</span>
              </div>
            }

            @if (promptSections().length > 0) {
              <div class="bg-slate-800/60 rounded-2xl border border-slate-700/80 shadow-2xl shadow-black/20 relative animate-[fadeIn_0.5s_ease-in-out]">
                <div class="p-6 sm:p-8">
                  <div class="flex justify-between items-center mb-6">
                    <h2 class="text-2xl font-bold text-white">{{ prompt